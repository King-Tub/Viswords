<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VisWords - AI单词学习</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- 导航栏 -->
        <nav class="navbar">
            <div class="nav-brand">
                <h1><i class="fas fa-book-open"></i> VisWords</h1>
                <p>AI驱动的单词学习平台</p>
            </div>
            <div class="nav-user">
                <span id="username">访客</span>
                <button id="progress-btn" class="btn-icon">
                    <i class="fas fa-chart-line"></i>
                </button>
            </div>
            <div class="nav-actions">
    <button id="show-quote" class="btn-icon" title="名人名言">
        <i class="fas fa-quote-right"></i>
    </button>
    <button id="show-timer" class="btn-icon" title="专注计时器">
        <i class="fas fa-clock"></i>
    </button>
    <button id="show-spelling" class="btn-icon" title="拼写练习">
        <i class="fas fa-spell-check"></i>
    </button>
</div>
        </nav>

        <!-- 主内容区 -->
        <div class="main">
            <!-- 左侧菜单 -->
            <div class="sidebar">
                <div class="menu-group">
                    <h3>学习模式</h3>
                    <button class="menu-btn active" data-mode="learn">
                        <i class="fas fa-book"></i> 单词学习
                    </button>
                    <button class="menu-btn" data-mode="test">
                        <i class="fas fa-robot"></i> AI测试
                    </button>
                    <button class="menu-btn" data-mode="image">
                        <i class="fas fa-camera"></i> 识图学词
                    </button>
                </div>
                
                <div class="menu-group">
                    <h3>单词库</h3>
                    <button class="menu-btn" data-level="CET-4">
                        <i class="fas fa-graduation-cap"></i> 四级词汇
                        <span class="badge" id="cet4-count">10</span>
                    </button>
                    <button class="menu-btn" data-level="CET-6">
                        <i class="fas fa-university"></i> 六级词汇
                        <span class="badge" id="cet6-count">5</span>
                    </button>
                </div>
                
                <div class="menu-group">
                    <h3>自我学习词库</h3>
                    <button class="menu-btn" data-mode="learned" id="learned-words-btn">
                        <i class="fas fa-star"></i> 已掌握单词
                        <span class="badge" id="learned-count">0</span>
                    </button>
                    <button class="menu-btn" data-mode="custom" id="custom-words-btn">
                        <i class="fas fa-plus-circle"></i> 自定义单词
                        <span class="badge" id="custom-count">0</span>
                    </button>
                    <button class="menu-btn" data-mode="translation" id="translation-test-btn">
                        <i class="fas fa-language"></i> 翻译测试
                    </button>
                    <button class="menu-btn" data-mode="history" id="learning-history-btn">
                        <i class="fas fa-history"></i> 学习历史
                    </button>
                    <button class="menu-btn" data-mode="test-history" id="test-history-btn">
                        <i class="fas fa-file-alt"></i> 测试历史
                    </button>
                    <button class="menu-btn" data-mode="translation-history" id="translation-history-btn">
                        <i class="fas fa-language"></i> 翻译历史
                    </button>
                </div>
                
                <div class="menu-group">
                    <h3>我的进度</h3>
                    <div class="progress-summary">
                        <div class="progress-item">
                            <span class="progress-label">已掌握</span>
                            <span class="progress-value" id="mastered-count">0</span>
                        </div>
                        <div class="progress-item">
                            <span class="progress-label">学习中</span>
                            <span class="progress-value" id="learning-count">0</span>
                        </div>
                        <div class="progress-item">
                            <span class="progress-label">已认识</span>
                            <span class="progress-value" id="known-count">0</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 中央内容区 -->
            <div class="content">
                <!-- 欢迎区域 -->
                <div id="welcome-section" class="section active">
                    <div class="welcome-card">
                        <div class="welcome-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <h2>欢迎使用 VisWords</h2>
                        <p>通过AI技术和图像识别，让英语学习更高效、更有趣</p>
                        
                        <div class="init-form">
                            <input type="text" id="username-input" class="form-input" 
                                   placeholder="请输入您的名字" value="学习者">
                            <div class="level-select">
                                <label>
                                    <input type="radio" name="level" value="CET-4" checked>
                                    <span class="radio-label">英语四级 (CET-4)</span>
                                </label>
                                <label>
                                    <input type="radio" name="level" value="CET-6">
                                    <span class="radio-label">英语六级 (CET-6)</span>
                                </label>
                            </div>
                            <button id="start-learning-btn" class="btn-primary">
                                <i class="fas fa-play"></i> 开始学习
                            </button>
                        </div>
                    </div>
                    
                    <div class="features">
                        <div class="feature">
                            <i class="fas fa-lightbulb"></i>
                            <h3>AI智能出题</h3>
                            <p>根据学习进度生成个性化测试</p>
                        </div>
                        <div class="feature">
                            <i class="fas fa-image"></i>
                            <h3>识图学单词</h3>
                            <p>通过图片识别学习相关词汇</p>
                        </div>
                        <div class="feature">
                            <i class="fas fa-chart-bar"></i>
                            <h3>进度跟踪</h3>
                            <p>实时记录学习成果</p>
                        </div>
                        <div class="feature">
                            <i class="fas fa-language"></i>
                            <h3>翻译测试</h3>
                            <p>检测单词理解和运用能力</p>
                        </div>
                    </div>
                </div>

                <!-- 单词学习区域 -->
<div id="learn-section" class="section">
    <div class="learn-header">
        <h2>单词学习</h2>
        <div class="learn-controls">
            <button id="prev-word" class="btn-icon">
                <i class="fas fa-chevron-left"></i>
            </button>
            <span id="word-counter" class="counter">1/10</span>
            <button id="next-word" class="btn-icon">
                <i class="fas fa-chevron-right"></i>
            </button>
            <button id="shuffle-words" class="btn-secondary">
                <i class="fas fa-random"></i> 随机
            </button>
        </div>
    </div>
    
    <div class="learn-card">
        <div class="word-header">
            <h1 id="current-word">abandon</h1>
            <div class="word-meta">
                <span id="word-phonetic" class="phonetic">/əˈbændən/</span>
                <span id="word-level" class="level-badge">CET-4</span>
            </div>
            <div class="word-actions">
                <button class="status-btn" data-status="known">
                    <i class="far fa-check-circle"></i> 已认识
                </button>
                <button class="status-btn active" data-status="learning">
                    <i class="fas fa-book"></i> 学习中
                </button>
                <button class="status-btn" data-status="mastered">
                    <i class="fas fa-star"></i> 已掌握
                </button>
            </div>
        </div>
        
        <div class="word-content">
            <div class="definition-box">
                <h3>英文释义</h3>
                <p id="definition-en">to leave completely and finally</p>
            </div>
            <div class="definition-box">
                <h3>中文释义</h3>
                <p id="definition-cn">放弃，抛弃</p>
            </div>
            <div class="definition-box">
                <h3>例句</h3>
                <p id="word-example">He decided to abandon his car and continue on foot.</p>
            </div>
        </div>
        
        <div class="word-footer">
            <button id="play-uk" class="btn-audio">
                <i class="fas fa-volume-up"></i> 英式发音
            </button>
            <button id="play-us" class="btn-audio">
                <i class="fas fa-volume-up"></i> 美式发音
            </button>
        </div>
    </div>
    
    <div class="related-words">
        <h3>相关单词</h3>
        <div id="related-words-list" class="tags">
            <span class="tag">leave</span>
            <span class="tag">desert</span>
            <span class="tag">quit</span>
        </div>
    </div>
</div>

                <!-- AI测试区域 -->
                <div id="test-section" class="section">
                    <div class="test-header">
                        <h2>AI智能测试</h2>
                        <button id="generate-test-btn" class="btn-primary">
                            <i class="fas fa-magic"></i> 生成新测试
                        </button>
                    </div>
                    
                    <div class="test-card">
                        <div id="test-welcome">
                            <div class="test-icon">
                                <i class="fas fa-robot"></i>
                            </div>
                            <h3>AI测试准备就绪</h3>
                            <p>点击下方按钮，AI将根据您的学习进度生成个性化测试题</p>
                            <button id="start-test-btn" class="btn-primary">
                                <i class="fas fa-play"></i> 开始测试
                            </button>
                        </div>
                        
                        <div id="test-content" style="display: none;">
                            <div class="test-paragraph">
                                <h3><i class="fas fa-book-reader"></i> 阅读理解</h3>
                                <p id="test-paragraph">Loading...</p>
                            </div>
                            
                            <div class="test-questions">
                                <h3><i class="fas fa-question-circle"></i> 选择题</h3>
                                <div id="questions-list">
                                    <!-- 问题将在这里动态生成 -->
                                </div>
                            </div>
                            
                            <div class="sentence-exercise">
                                <h3><i class="fas fa-pen"></i> 造句练习</h3>
                                <div class="exercise-content">
                                    <p>使用单词 <strong id="make-word">word</strong> 造一个句子：</p>
                                    <p class="hint" id="make-hint">Hint will appear here</p>
                                    <textarea id="sentence-input" class="form-input" 
                                              placeholder="在此输入你的句子..."></textarea>
                                    <p class="example" id="sentence-example">Example sentence will appear here</p>
                                    <div class="exercise-actions">
                                        <button id="check-sentence" class="btn-secondary">
                                            <i class="fas fa-check"></i> 检查句子
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="test-actions">
                                <button id="show-answers-btn" class="btn-secondary">
                                    <i class="fas fa-eye"></i> 查看答案
                                </button>
                                <button id="submit-test" class="btn-primary">
                                    <i class="fas fa-paper-plane"></i> 提交测试
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 图片识别区域 -->
                <div id="image-section" class="section">
                    <div class="image-header">
                        <h2>识图学词</h2>
                        <p>上传图片或拍照，AI将识别图片中的内容并推荐相关单词</p>
                    </div>
                    
                    <div class="image-content">
                        <div class="image-upload-card">
                            <div id="upload-box" class="upload-area">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <h3>拖拽图片到此处，或点击选择</h3>
                                <p>支持 JPG, PNG, GIF 格式，最大16MB</p>
                                <button id="select-image-btn" class="btn-primary">
                                    <i class="fas fa-folder-open"></i> 选择图片
                                </button>
                                <button id="camera-btn" class="btn-secondary">
                                    <i class="fas fa-camera"></i> 拍照
                                </button>
                                <input type="file" id="image-upload" accept="image/*" style="display: none;">
                            </div>
                            
                            <div id="camera-container" class="camera-area" style="display: none;">
                                <video id="camera-video" autoplay playsinline></video>
                                <div class="camera-controls">
                                    <button id="capture-btn" class="btn-primary">
                                        <i class="fas fa-camera"></i> 拍照
                                    </button>
                                    <button id="close-camera" class="btn-secondary">
                                        <i class="fas fa-times"></i> 关闭
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div id="image-result" class="image-result" style="display: none;">
                            <div class="result-preview">
                                <img id="result-image" src="" alt="识别的图片">
                                <div class="result-info">
                                    <h3><i class="fas fa-info-circle"></i> 识别结果</h3>
                                    <p id="image-description">AI正在分析图片内容...</p>
                                </div>
                            </div>
                            
                            <div class="suggested-words">
                                <h3><i class="fas fa-lightbulb"></i> 推荐单词</h3>
                                <div id="suggested-words" class="words-grid">
                                    <!-- 单词将在这里动态生成 -->
                                </div>
                                <button id="new-image" class="btn-secondary">
                                    <i class="fas fa-redo"></i> 识别新图片
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 自定义单词区域 -->
                <div id="custom-section" class="section">
                    <div class="custom-header">
                        <h2>自定义单词</h2>
                        <button id="add-custom-word-btn" class="btn-primary">
                            <i class="fas fa-plus"></i> 添加新单词
                        </button>
                    </div>
                    
                    <div id="add-custom-word-form" class="custom-form" style="display: none;">
                        <h3><i class="fas fa-edit"></i> 添加单词</h3>
                        <div class="form-group">
                            <label>单词 *</label>
                            <input type="text" id="custom-word-input" class="form-input" placeholder="请输入单词">
                        </div>
                        <div class="form-group">
                            <label>音标</label>
                            <input type="text" id="custom-phonetic-input" class="form-input" placeholder="例如: /wɜːd/">
                        </div>
                        <div class="form-group">
                            <label>英文释义</label>
                            <input type="text" id="custom-definition-en-input" class="form-input" placeholder="英文释义">
                        </div>
                        <div class="form-group">
                            <label>中文释义 *</label>
                            <input type="text" id="custom-definition-cn-input" class="form-input" placeholder="中文释义">
                        </div>
                        <div class="form-group">
                            <label>例句</label>
                            <textarea id="custom-example-input" class="form-input" placeholder="例句"></textarea>
                        </div>
                        <div class="form-actions">
                            <button id="cancel-custom-word" class="btn-secondary">
                                <i class="fas fa-times"></i> 取消
                            </button>
                            <button id="save-custom-word" class="btn-primary">
                                <i class="fas fa-save"></i> 保存单词
                            </button>
                        </div>
                    </div>
                    
                    <div id="custom-words-list" class="words-list">
                        <!-- 自定义单词将在这里显示 -->
                    </div>
                </div>

                <!-- 已掌握单词区域 -->
                <div id="learned-section" class="section">
                    <div class="learned-header">
                        <h2>已掌握单词</h2>
                        <button id="export-learned-btn" class="btn-secondary">
                            <i class="fas fa-download"></i> 导出单词
                        </button>
                    </div>
                    
                    <div id="learned-words-list" class="words-list">
                        <!-- 已掌握单词将在这里显示 -->
                    </div>
                </div>

                <!-- 翻译测试区域 -->
                <div id="translation-section" class="section">
                    <div class="translation-header">
                        <h2>翻译测试</h2>
                        <p>检验你对单词的理解和运用能力</p>
                    </div>
                    
                    <div class="translation-content">
                        <div id="translation-welcome">
                            <div class="translation-icon">
                                <i class="fas fa-language"></i>
                            </div>
                            <h3>翻译测试准备就绪</h3>
                            <p>AI将随机选择你已掌握的单词进行翻译测试</p>
                            <div class="translation-actions">
                                <button id="start-translation-btn" class="btn-primary">
                                    <i class="fas fa-play"></i> 开始测试
                                </button>
                                <button id="start-translation-btn2" class="btn-secondary">
                                    <i class="fas fa-sync"></i> 随机测试
                                </button>
                            </div>
                        </div>
                        
                        <div id="translation-content" style="display: none;">
                            <div class="translation-card">
                                <div class="translation-word">
                                    <h2 id="translation-word">word</h2>
                                    <span id="translation-phonetic" class="phonetic">/wɜːd/</span>
                                </div>
                                
                                <div class="translation-definition">
                                    <p id="translation-definition">单词释义</p>
                                </div>
                                
                                <div class="translation-sentence">
                                    <h3>翻译以下句子：</h3>
                                    <p id="translation-sentence-en">Sentence to translate</p>
                                    <textarea id="translation-input" class="form-input" 
                                              placeholder="在此输入你的翻译..."></textarea>
                                    <p class="hint" id="translation-hint">翻译提示</p>
                                </div>
                                
                                <div class="translation-actions">
                                    <button id="skip-translation" class="btn-secondary">
                                        <i class="fas fa-step-forward"></i> 跳过
                                    </button>
                                    <button id="submit-translation" class="btn-primary">
                                        <i class="fas fa-paper-plane"></i> 提交翻译
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 学习历史区域 -->
                <div id="history-section" class="section">
                    <div class="history-header">
                        <h2>学习历史</h2>
                        <button id="refresh-history-btn" class="btn-icon">
                            <i class="fas fa-sync"></i>
                        </button>
                    </div>
                    
                    <div class="history-stats">
                        <div class="stat-card">
                            <i class="fas fa-calendar-day"></i>
                            <div class="stat-info">
                                <span class="stat-value" id="today-activities">0</span>
                                <span class="stat-label">今日活动</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-fire"></i>
                            <div class="stat-info">
                                <span class="stat-value" id="streak-days">0 天</span>
                                <span class="stat-label">连续学习</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-book"></i>
                            <div class="stat-info">
                                <span class="stat-value" id="total-words">0</span>
                                <span class="stat-label">总单词数</span>
                            </div>
                        </div>
                    </div>
                    
                    <div id="history-list" class="history-list">
                        <!-- 学习历史将在这里显示 -->
                    </div>
                </div>

                <!-- 测试历史区域 -->
                <div id="test-history-section" class="section">
                    <div class="test-history-header">
                        <h2>测试历史</h2>
                        <button id="refresh-test-history" class="btn-icon">
                            <i class="fas fa-sync"></i>
                        </button>
                    </div>
                    
                    <div id="test-history-list" class="test-history-list">
                        <!-- 测试历史将在这里显示 -->
                    </div>
                </div>

                <!-- 翻译历史区域 -->
                <div id="translation-history-section" class="section">
                    <div class="translation-history-header">
                        <h2>翻译历史</h2>
                        <span id="translation-accuracy" class="accuracy-badge">正确率: 0%</span>
                        <button id="refresh-translation-history" class="btn-icon">
                            <i class="fas fa-sync"></i>
                        </button>
                    </div>
                    
                    <div id="translation-history-list" class="translation-history-list">
                        <!-- 翻译历史将在这里显示 -->
                    </div>
                </div>
            </div>
        </div>
    </div>
                <!-- 名人名句弹窗 -->
<div id="quote-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3><i class="fas fa-quote-left"></i> 每日名言</h3>
            <button class="modal-close"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
            <p id="quote-text">Loading...</p>
            <p id="quote-author" class="quote-author">- 作者</p>
        </div>
        <div class="modal-footer">
            <button id="next-quote" class="btn-secondary">下一条</button>
            <button id="close-quote" class="btn-primary">关闭</button>
        </div>
    </div>
</div>

<!-- 倒计时学习模态框 -->
<div id="timer-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3><i class="fas fa-clock"></i> 专注学习倒计时</h3>
            <button class="modal-close"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
            <div class="timer-display">
                <div class="timer-circle">
                    <div class="timer-progress"></div>
                    <div class="timer-text">
                        <span id="timer-minutes">25</span>:<span id="timer-seconds">00</span>
                    </div>
                </div>
                <div class="timer-status" id="timer-status">准备开始</div>
            </div>
            <div class="timer-controls">
                <div class="time-presets">
                    <button class="time-preset" data-minutes="5">5分钟</button>
                    <button class="time-preset" data-minutes="15">15分钟</button>
                    <button class="time-preset" data-minutes="25" class="active">25分钟</button>
                    <button class="time-preset" data-minutes="45">45分钟</button>
                    <button class="time-preset" data-minutes="60">60分钟</button>
                </div>
                <div class="custom-time">
                    <input type="number" id="custom-minutes" min="1" max="120" value="25">
                    <span>分钟</span>
                </div>
                <div class="timer-buttons">
                    <button id="start-timer" class="btn-primary">
                        <i class="fas fa-play"></i> 开始
                    </button>
                    <button id="pause-timer" class="btn-secondary">
                        <i class="fas fa-pause"></i> 暂停
                    </button>
                    <button id="reset-timer" class="btn-secondary">
                        <i class="fas fa-redo"></i> 重置
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 单词拼写模态框 -->
<div id="spelling-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3><i class="fas fa-spell-check"></i> 单词拼写练习</h3>
            <button class="modal-close"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
            <div class="spelling-instructions">
                <p>根据中文释义和提示，拼写出正确的英文单词</p>
            </div>
            <div class="spelling-content">
                <div class="spelling-hint">
                    <div class="hint-item">
                        <span class="hint-label">中文释义：</span>
                        <span id="spelling-hint-cn">加载中...</span>
                    </div>
                    <div class="hint-item">
                        <span class="hint-label">英文释义：</span>
                        <span id="spelling-hint-en">Loading...</span>
                    </div>
                    <div class="hint-item">
                        <span class="hint-label">词性：</span>
                        <span id="spelling-part-of-speech">noun</span>
                    </div>
                    <div class="hint-item">
                        <span class="hint-label">首字母：</span>
                        <span id="spelling-first-letter">a</span>
                    </div>
                    <div class="hint-item">
                        <span class="hint-label">单词长度：</span>
                        <span id="spelling-length">7</span> 个字母
                    </div>
                </div>
                <div class="spelling-input">
                    <input type="text" id="spelling-answer" placeholder="输入拼写答案" autocomplete="off" spellcheck="false">
                    <div class="spelling-keyboard">
                        <!-- 虚拟键盘将在这里动态生成 -->
                    </div>
                </div>
                <div class="spelling-feedback">
                    <p id="spelling-message"></p>
                    <div class="hint-buttons">
                        <button id="show-hint" class="btn-secondary">
                            <i class="fas fa-lightbulb"></i> 显示更多提示
                        </button>
                        <button id="skip-spelling" class="btn-secondary">
                            <i class="fas fa-forward"></i> 跳过
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <div class="spelling-stats">
                <span>正确: <span id="spelling-correct">0</span></span>
                <span>错误: <span id="spelling-wrong">0</span></span>
                <span>总计: <span id="spelling-total">0</span></span>
            </div>
            <button id="check-spelling" class="btn-primary">
                <i class="fas fa-check"></i> 检查
            </button>
            <button id="new-spelling-word" class="btn-secondary">
                <i class="fas fa-random"></i> 新单词
            </button>
        </div>
    </div>
</div>

    <script src="/static/js/main.js"></script>
</body>
</html>